import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as n,o as l}from"./app-CrnLyEfW.js";const e={};function t(h,i){return l(),a("div",null,i[0]||(i[0]=[n(`<h1 id="rvs-3-反盗版" tabindex="-1"><a class="header-anchor" href="#rvs-3-反盗版"><span>rvs.3 反盗版</span></a></h1><h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言"><span>前言</span></a></h2><p>此文档将带你认识反盗版（Anti-piracy，AP）的原理，理解MOD反盗版系统的构造</p><h2 id="_0-0-什么时候使用ap机制" tabindex="-1"><a class="header-anchor" href="#_0-0-什么时候使用ap机制"><span>0.0 什么时候使用AP机制？</span></a></h2><p>在您为您的MOD付出很大心血时，不想被盗版玩家无情滥用</p><p>遏制盗版玩家的猖狂（毕竟你游盗版玩家真的多又恶心。不包括会在将来补票的的玩家）</p><p>不建议滥用AP机制</p><h2 id="_1-0-原理" tabindex="-1"><a class="header-anchor" href="#_1-0-原理"><span>1.0 原理</span></a></h2><p>自Ravenfield在EA20（？）去除UFO反盗版机制（一大群UFO在头顶飞击杀玩家）后，相当（？）一部分MODDER开始转入自开发反盗版机制</p><p>按大多数MOD采用的方案，都是用判断<code>Player.actor.name</code>是否等于&quot;<code>Unknown Player</code>&quot;？来确定游戏是否为盗版</p><p>使用这原理的缘由是因为这是游戏提供的唯一一个可用Api（毕竟你游限制了外来C#的导入，C#使用SteamworksAPI进行盗版验证会更加地准确。即使是在正版环境，如果Steam不在后台，<code>Player.actor.name</code>仍等于&quot;<code>Unknown Player</code>&quot;，这是一个问题。此处仍可以通过***dll进行规避</p><p>而且当Steam在后台时（即正版的运行环境）时，Steamworks API会传入用户名到游戏来填充<code>Player.actor.name</code>，即使Steam用户名未设置似乎也不会为&quot;<code>Unknown Player</code>&quot;？</p><p>有了原理，我们就可以继续添加触发操作了</p><div class="language-lua line-numbers-mode" data-highlighter="shiki" data-ext="lua" data-title="lua" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">behaviour</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;APSystem&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">local</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> enableAP</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> APSystem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Player</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.actor.name == </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Unknown Player&quot; </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">and </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">GameManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.isTestingContentMod != </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">then</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> --当...且游戏不处于测试模式时...</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">	   self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.enableAP = </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ture</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	end</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> APSystem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.enableAP == </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ture</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> then</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    	--放入你的触发操作</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	end</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">end</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-0-触发操作" tabindex="-1"><a class="header-anchor" href="#_2-0-触发操作"><span>2.0 触发操作</span></a></h2><p>当到这一步时，你可以做的操作很多</p><p>如阻止玩家进行游戏（血量清零、删除地图场景内所有物体）：</p><div class="language-lua line-numbers-mode" data-highlighter="shiki" data-ext="lua" data-title="lua" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Player</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">MoveActor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Vector3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">--阻止玩家移动</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Player</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.actor.health = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> --玩家血量清零</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">SpawnUi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Open</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">--打开武器选择界面来阻止玩家游戏</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Player</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.activeWeapon.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">LockWeapon</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">--锁定玩家武器</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.timeScale = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> --阻止玩家暂停游戏</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">--删除游戏内物体，但这会直接卡崩游戏</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">gameObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">GameObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">FindObjectsOfType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">GameObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> pairs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">gameObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">do</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    GameObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Destroy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">end</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">--替换游戏内的所有Text</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">gameObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">GameObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">FindObjectsOfType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> pairs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">gameObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">do</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    y</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.text = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;TEST&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">--播放特定音频（假设音频的AudioSource在apAS这个变量）</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apAS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SetOutputAudioMixer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">AudioMixer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.FirstPerson)  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">--将AS组件的Output设置为玩家的</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不推荐使用jumpscare（极度不推荐）、强制传教等方式来恐吓盗版玩家</p><p>毕竟做人留一线，日后好相见</p><p>自己也有可能被自己的AP机制吓到</p><p>做人不要做太死</p><p>适度就好</p><h2 id="_2-1-混淆机制" tabindex="-1"><a class="header-anchor" href="#_2-1-混淆机制"><span>2.1 混淆机制</span></a></h2><p>防止盗版玩家通过分批测试找到带AP机制的MOD</p><p>此规避机制包括延时&amp;随机启动AP</p><h2 id="_3-0-应用" tabindex="-1"><a class="header-anchor" href="#_3-0-应用"><span>3.0 应用</span></a></h2><p>在介绍完原理与操作后，相信您应该可以自行构建一个反盗版脚本了</p><p>祝您好运！（〃｀ 3′〃）</p>`,29)]))}const d=s(e,[["render",t],["__file","rvs.3.html.vue"]]),r=JSON.parse('{"path":"/cn/Tutorials/rvs.3.html","title":"rvs.3 反盗版","lang":"zh-CN","frontmatter":{"category":["教程"],"head":[["meta",{"property":"og:url","content":"https://ravenfieldcommunity.github.io/docs/cn/Tutorials/rvs.3.html"}],["meta",{"property":"og:site_name","content":"Ravenfield社区文档"}],["meta",{"property":"og:title","content":"rvs.3 反盗版"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-25T13:24:54.000Z"}],["meta",{"property":"article:modified_time","content":"2024-07-25T13:24:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"rvs.3 反盗版\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-07-25T13:24:54.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":2,"title":"0.0 什么时候使用AP机制？","slug":"_0-0-什么时候使用ap机制","link":"#_0-0-什么时候使用ap机制","children":[]},{"level":2,"title":"1.0 原理","slug":"_1-0-原理","link":"#_1-0-原理","children":[]},{"level":2,"title":"2.0 触发操作","slug":"_2-0-触发操作","link":"#_2-0-触发操作","children":[]},{"level":2,"title":"2.1 混淆机制","slug":"_2-1-混淆机制","link":"#_2-1-混淆机制","children":[]},{"level":2,"title":"3.0 应用","slug":"_3-0-应用","link":"#_3-0-应用","children":[]}],"git":{"createdTime":1677332562000,"updatedTime":1721913894000,"contributors":[{"name":"Leafx-code","email":"82655578+Leafx-code@users.noreply.github.com","commits":3},{"name":"KeilAwk","email":"82655578+KeilAwk@users.noreply.github.com","commits":1}]},"filePathRelative":"cn/Tutorials/rvs.3.md","localizedDate":"2023年2月25日"}');export{d as comp,r as data};
